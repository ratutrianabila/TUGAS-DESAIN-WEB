!function(t){var e={},n=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(i){return i?(i=t.galleriffic.normalizeHash(i),e[i]):void 0},gotoImage:function(e){var i=t.galleriffic.getImage(e);if(!i)return!1;var n=i.gallery;return n.gotoImage(i),!0},removeImageByHash:function(e,i){var n=t.galleriffic.getImage(e);if(!n)return!1;var r=n.gallery;return i&&i!=r?!1:r.removeImageByIndex(n.index)}};var r={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,i){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(i).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(i,r,s,o){var a="string"==typeof i?t(i):i,h=a.find("a.thumb"),u=h.attr("href"),l=h.attr("title"),c=a.find(".caption").remove(),d=h.attr("name"),f="";a.find(".srcset").length>0&&(f=a.find(".srcset").html());var p=0;a.find(".img_width").length>0&&(p=a.find(".img_width").text());var g=0;a.find(".img_height").length>0&&(g=a.find(".img_height").text()),n++,(!d||e[""+d])&&(d=n),s||(o=this.data.length);var m={title:l,slideUrl:u,caption:c,srcset:f,width:p,height:g,hash:d,gallery:this,index:o};s?(this.data.splice(o,0,m),this.updateIndices(o)):this.data.push(m);var v=this;return r||this.updateThumbs(function(){var t=v.find("ul.thumbs");s?t.children(":eq("+o+")").before(a):t.append(a),v.onImageAdded&&v.onImageAdded(m,a)}),e[""+d]=m,h.attr("rel","history").attr("href","#"+d).removeAttr("name").click(function(t){v.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(0>t||t>=this.data.length)return!1;var e=this.data[t];return e?(this.removeImage(e),!0):!1},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var i=t.index;return this.data.splice(i,1),delete e[""+t.hash],this.updateThumbs(function(){var e=o.find("ul.thumbs").children(":eq("+i+")").remove();o.onImageRemoved&&o.onImageRemoved(t,e)}),this.updateIndices(i),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var i=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,i)}var n=this,r=e-t;if(0>r&&(r=this.data.length-1-t+e),this.preloadAhead>=0&&r>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var s=this.data[e];if(!s)return this;if(s.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){s.image=this,n.preloadNext(t,e)},o.alt=s.title,o.src=s.slideUrl,o.srcset=s.srcset,0!=s.width&&(o.width=s.width),0!=s.height&&(o.height=s.height),this},preloadNext:function(t,e){var i=this.getNextIndex(e);if(i==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,i)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return 0>e&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var i=this.getCurrentPage(),n=this.getNumPages()-1;if(n>i){var r=i*this.numThumbs,s=r+this.numThumbs;this.gotoIndex(s,t,e)}return this},previousPage:function(t,e){var i=this.getCurrentPage();if(i>0){var n=i*this.numThumbs,r=n-this.numThumbs;this.gotoIndex(r,t,e)}return this},gotoIndex:function(e,i,n){i||this.pause(),0>e?e=0:e>=this.data.length&&(e=this.data.length-1);var r=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(r.hash)):this.gotoImage(r),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var i=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var r=this.syncTransitions&&t.image,s=!0,o=this,a=function(){s=!1,i.remove(),n&&n.remove(),r||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,r):o.$loadingContainer&&o.$loadingContainer.show())};if(0==i.length?a():this.onTransitionOut?this.onTransitionOut(i,n,r,a):(i.fadeTo(this.getDefaultTransitionDuration(r),0,a),n&&n.fadeTo(this.getDefaultTransitionDuration(r),0)),r&&this.buildImage(t,r),!t.image){var h=new Image;h.onload=function(){t.image=this,s||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,r)},h.alt=t.title,h.src=t.slideUrl,h.srcset=t.srcset,0!=t.width&&(h.width=t.width),0!=t.height&&(h.height=t.height)}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(e,i){var n=this,r=this.getNextIndex(e.index),s=this.$imageContainer.html('<span class="image-wrapper current"><div><a class="advance-link" rel="history" href="#'+this.data[r].hash+'" title="'+e.title+'"></a></div></span>').find("span.current").css("opacity","0");s.find("a").append(e.image).click(function(t){n.clickHandler(t,this)});var o=0;return this.$captionContainer&&(o=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(e.caption)),t(".caption-text").width(t("a.advance-link").width()-6),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?(this.onTransitionIn(s,o,i),s.fadeTo(this.getDefaultTransitionDuration(i),1)):(s.fadeTo(this.getDefaultTransitionDuration(i),1),o&&o.fadeTo(this.getDefaultTransitionDuration(i),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){n.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){var t=this.getCurrentPage();t!=this.displayedPage&&this.updateThumbs();var e=this.find("ul.thumbs").children();return e.filter(".selected").removeClass("selected"),e.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,i=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(i):(this.hide(),i()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var i=this.find("div.top");0==i.length?i=this.prepend('<div class="top pagination"></div>').find("div.top"):i.empty(),e&&this.buildPager(i)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var r=this.getCurrentPage(),s=r*this.numThumbs,o=s+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var a=this.find("ul.thumbs");return a.find("li").each(function(e){var i=t(this);e>=s&&o>=e?i.show():i.hide()}),this.displayedPage=r,a.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,i=this.getNumPages(),n=this.getCurrentPage(),r=n*this.numThumbs,s=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var a=i-o;s>a&&(o-=s-a)}if(0>o&&(o=0),n>0){var h=r-this.numThumbs;t.append('<a rel="history" href="#'+this.data[h].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,i),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),s--);s>0;)this.buildPageLink(t,o,i),s--,o++;if(i>o){var u=i-1;u>o&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,u,i)}var l=r+this.numThumbs;return l<this.data.length&&t.append('<a rel="history" href="#'+this.data[l].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,i){var n=e+1,r=this.getCurrentPage();if(e==r)t.append('<span class="current">'+n+"</span>");else if(i>e){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,r,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var o=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.$controlsContainer.append(this.autoStart?'<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'">'+this.pauseLinkText+"</a></div>":'<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'">'+this.playLinkText+"</a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return o.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'">'+this.prevLinkText+'</a><a class="next" rel="history" title="'+this.nextLinkText+'">'+this.nextLinkText+"</a></div>").find("div.nav-controls a").click(function(t){o.clickHandler(t,this)}));var a=!this.enableHistory||!location.hash;if(this.enableHistory&&location.hash){var h=t.galleriffic.normalizeHash(location.hash),u=e[h];u||(a=!0)}return a&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){var e=t.charCode?t.charCode:t.keyCode?t.keyCode:0;switch(e){case 999999:o.next(),t.preventDefault();break;case 999998:o.previousPage(),t.preventDefault();break;case 999997:o.nextPage(),t.preventDefault();break;case 999995:o.gotoIndex(o.data.length-1),t.preventDefault();break;case 999996:o.gotoIndex(0),t.preventDefault();break;case 37:o.previous(),t.preventDefault();break;case 39:o.next(),t.preventDefault()}}),this.autoStart&&this.play(),setTimeout(function(){o.preloadInit()},1e3),this}}(jQuery),function(t){var e={mouseOutOpacity:.67,mouseOverOpacity:1,fadeSpeed:"fast",exemptionSelector:".selected"};t.fn.opacityrollover=function(i){function n(e,i){var n=t(e);r.exemptionSelector&&(n=n.not(r.exemptionSelector)),n.fadeTo(r.fadeSpeed,i)}t.extend(this,e,i);var r=this;return this.css("opacity",this.mouseOutOpacity).hover(function(){n(this,r.mouseOverOpacity)},function(){n(this,r.mouseOutOpacity)}),this}}(jQuery),function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")(t)):"function"==typeof define&&define.amd?define("bootstrap3-typeahead",["jquery"],function(t){return e(t)}):e(t.jQuery)}(this,function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.delay="number"==typeof this.options.delay?this.options.delay:250,this.$menu=t(this.options.menu),this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").data("value");return(this.autoSelect||t)&&this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var e,i=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return e="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,this.$menu.insertAfter(this.$element).css({top:i.top+i.height+e,left:i.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){var i;if(this.query="undefined"!=typeof e&&null!==e?e:this.$element.val()||"",this.query.length<this.options.minLength&&!this.showHintOnFocus)return this.shown?this.hide():this;var n=t.proxy(function(){i=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,i&&this.process(i)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(n,this.delay)},process:function(e){var i=this;return e=t.grep(e,function(t){return i.matcher(t)}),e=this.sorter(e),e.length?"all"==this.options.items?this.render(e).show():this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],n=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?n.push(e):r.push(e):i.push(e);return i.concat(n,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var i=this;return e=t(e).map(function(e,n){return e=t(i.options.item).data("value",n),e.find("a").html(i.highlighter(n)),e[0]}),this.autoSelect&&e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),i=e.next();i.length||(i=t(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.charCode||(t.preventDefault(),this.prev());break;case 40:t.charCode||(t.preventDefault(),this.next())}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.shown||40!=e.keyCode?this.move(e):this.lookup("")},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused||(this.focused=!0,(0===this.options.minLength&&!this.$element.val()||this.options.showHintOnFocus)&&this.lookup())},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=t.fn.typeahead;t.fn.typeahead=function(i){var n=arguments;return this.each(function(){var r=t(this),s=r.data("typeahead"),o="object"==typeof i&&i;s||r.data("typeahead",s=new e(this,o)),"string"==typeof i&&(n.length>1?s[i].apply(s,Array.prototype.slice.call(n,1)):s[i]())})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}),function(){"use strict";function t(e){return void 0===e&&(e={}),this instanceof t?void t.setOptions(this,e,t.defaultOptions,b,!0,this._optionsHook):new t(e)}function e(t,e){for(var i in t)t.hasOwnProperty(i)&&(this[i]=e.hasOwnProperty(i)&&void 0!==e[i]?e[i]:t[i])}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function n(t,e){for(var i=e.length,n=0,r=-1;++r<i;){var s=e[r],o=s.length;t.substr(n,o)===s&&(n+=o)}return n>0?t.substr(n):t}function r(t){var e=t.length;if(!e)return null;for(var i=o(t[0]),n=0;++n<e;)i+="|"+o(t[n]);return new RegExp("(?:^|\\s)\\s*("+i+"):\\s*","g")}function s(t){var e=t.length;if(!e)return null;var i=o(t);return new RegExp("(?:^|["+i+"])+([^"+i+"])[^"+i+"]*","g")}function o(t){var e=/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g;return t.replace(e,"\\$&")}function a(t,e,i,n,r,s){this.item=t,this.fields=e,this.score=i,this.matchIndex=n,this.subIndex=r,this.sortKey=s}function h(t,e){var i=e.score-t.score;if(0!==i)return i;var n=t.sortKey,r=e.sortKey;return n>r?1:r>n?-1:0}function u(t,e,i,n,r,s){this.normalized=t,this.tokens_groups=e,this.fused_str=i,this.fused_map=n,this.fused_score=0,this.has_children=r,this.children=s}function l(t,e,i){this.tokens=t,this.map=e,this.gate=i;for(var n=t.length,r=-1,s=new Array(n);++r<n;)s[r]=0;this.score_item=s.slice(),this.score_field=s.slice(),this.field_pos=s}function c(t,e){this.start=t,this.end=e}function d(t,e){this.item=t,this.fields=e}function f(t,e,i,n){for(var r,s,o,a=e.length;a>n&&(r=e[n++],"*"!==r&&""!==r);){if(!(r in t))return i;t=t[r]}var h=Object.prototype.toString.call(t),u="[object Array]"===h,l="[object Object]"===h;if(n===a)if(u)for(s=-1,o=t.length;++s<o;)i.push(t[s].toString());else if(l)for(r in t)t.hasOwnProperty(r)&&i.push(t[r].toString());else i.push(t.toString());else if("*"===r)if(u)for(s=-1,o=t.length;++s<o;)f(t[s],e,i,n);else if(l)for(r in t)t.hasOwnProperty(r)&&f(t[r],e,i,n);return i}function p(t){return t?t.toLowerCase().replace(/[^\u0000-\u007E]/g,function(t){return T[t]||t}):""}function g(){for(var t="\xe3\xe0\xe1\xe4\xe2\xe6\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\u0153\xf9\xfa\xfc\xfb\xf1\xe7",e="aaaaaaeeeeeiiiioooooouuuunc",i={},n=0;n<t.length;n++)i[t[n]]=e[n];return i}function m(t,e,i,n){var r=i.length,s=e.exec(t);if(null===s)return i[r]=t,void(n[r]="");for(var o,a,h=0;null!==s;)o=s.index,a=s[0].length,i[r]=t.substring(h,o),n[r]=t.substr(o,a),h=o+a,r++,s=e.exec(t);i[r]=t.substring(h),n[r]=""}function v(t,e,i,n){var r,s,o=t.length,a=[];for(r=0;o>r;r++)a[r]={};var h,u=new x(t,a,i,n),l=_(u,0,0).score,c=0;for(r=0;o>r&&(h=a[r][c],h);r++)e[r]=s=h.index,s>-1&&(c|=1<<s);return l}function _(t,e,i){var n=t.score_grid,r=t.cache_tree,s=t.score_thresholds,o=t.order_bonus,a=n.length,h=n[i].length;h>w&&(h=w);var u,l,c,d=s[i],f=0,p=-1,g=a-1>i,m=r[i+1];for(u=0;h>u;u++){var v=1<<u;if(!(e&v||(l=n[i][u],d>l))){if(g){c=e|v;var x=c in m?m[c]:_(t,c,i+1);l+=x.score,u<x.index&&(l+=o)}l>=f&&(f=l,p=u)}}g&&(c=e,l=c in m?m[c].score:_(t,c,i+1).score,l>f&&(f=l,p=-1));var k=new y(f,p);return r[i][e]=k,k}function y(t,e){this.score=t,this.index=e}function x(t,e,i,n){this.score_grid=t,this.cache_tree=e,this.score_thresholds=i,this.order_bonus=n}function k(t,e){var i,n,r=t.slice();for(t.length=e,i=0;e>i;i++)t[i]=-1;for(i=0;i<r.length;i++)n=r[i],n>-1&&e>n&&(t[n]=i)}t.defaultOptions={minimum_match:1,thresh_include:2,thresh_relative_to_best:.5,field_good_enough:20,bonus_match_start:.5,bonus_token_order:2,bonus_position_decay:.7,score_per_token:!0,score_test_fused:!1,score_acronym:!1,token_sep:" .,-:",score_round:.1,output_limit:0,sorter:h,normalize:p,filter:null,output_map:"item",join_str:", ",token_query_min_length:2,token_field_min_length:3,token_query_max_length:64,token_field_max_length:64,token_fused_max_length:64,token_min_rel_size:.6,token_max_rel_size:10,interactive_debounce:150,interactive_mult:1.2,interactive_burst:3,source:[],keys:[],lazy:!1,token_re:/\s+/g};var b={tags:[],index:[],tags_re:null,acro_re:null,token_re:null,options:null,dirty:!1,query:null,results:[],start_time:0,search_time:0},w=32;e.update=function(t,e,i){for(var n in i)i.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=void 0===i[n]?e[n]:i[n])},t.setOptions=function(t,n,r,s,o,a){o?(i(t,s),t.options=new e(r,n)):e.update(t.options,r,n),a.call(t,n)},i(t.prototype,{setOptions:function(e,i){void 0===i&&(i=e.reset||!1),t.setOptions(this,e,t.defaultOptions,b,i,this._optionsHook)},_optionsHook:function(t){var e=this.options;"output_map"in t&&"string"==typeof t.output_map&&(e.output_map="alias"===e.output_map?this.aliasResult:n(e.output_map,["root","."])),this.source=e.source;var i;if("keys"in t&&void 0!==(i=t.keys)){var a,h,u=Object.prototype.toString.call(i);if(this.tags=null,"[object String]"===u)this.keys=i.length?[i]:[];else if("[object Object]"===u){this.keys=[],this.tags=[],a=0;for(var l in i)i.hasOwnProperty(l)&&(this.tags[a]=l,this.keys[a]=i[l],a++)}else this.keys=i;for(i=this.keys,h=i.length,a=-1;++a<h;)i[a]=n(i[a],["item","."]);this.tags||(this.tags=i),this.tags_re=r(this.tags)}(null===this.acro_re||"acronym_tok"in t)&&(this.acro_re=s(e.token_sep)),(null===this.token_re||"token_sep"in t)&&(this.token_re=e.token_re=new RegExp("["+o(e.token_sep)+"]+","g")),(t.dirty||"source"in t||"keys"in t)&&(e.lazy?this.dirty=!0:(this._prepSource(this.source,this.keys,!0),this.dirty=!1))}}),i(t.prototype,{getMatchingField:function(e){var i=t.generateFields(e.item,[this.keys[e.matchIndex]]);return i[0][e.subIndex]},aliasResult:function(e){for(var i=this.options,n=t.generateFields(e.item,this.keys),r={},s=this.tags,o=i.join_str,a=-1,h=n.length;++a<h;)r[s[a]]=n[a].join(o);return r._item=e.item,r._score=e.score,r._match=n[e.matchIndex][e.subIndex],r}}),t.map=function(t,e,i,n){var r=t.length;if(n>0&&r>n&&(r=n),"function"!=typeof e)return t.slice(0,r);for(var s=new Array(r),o=-1;++o<r;)s[o]=e.call(i,t[o],o,t);return s},t.mapField=function(t,e,i){var n=t.length;if(i>0&&n>i&&(n=i),""===e)return t.slice(0,n);var r,s,o=new Array(n);if(-1===e.indexOf("."))for(s=-1;++s<n;)r=t[s],e in r&&(o[s]=r[e]);else{var a=e.split("."),h=a.length;for(s=-1;++s<n;){r=t[s];for(var u=-1;++u<h;){var l=a[u];if(!(l in r))break;r=r[l]}o[s]=r}}return o},t.filterGTE=function(t,e,i){for(var n,r=-1,s=-1,o=t.length,a=[];++r<o;)n=t[r],n[e]>=i&&(a[++s]=n);return a},i(t.prototype,{_prepQuery:function(e){var i,n,r,s,o,a,h=this.options,l=h.score_per_token,c=h.score_test_fused,d=h.token_fused_max_length,f=h.token_field_min_length,p=h.token_field_max_length,g=this.tags,m=this.tags_re,v=g.length,_=this.token_re;if(l&&v&&m){var y,x=0,k=0,b=new Array(v+1),w=m.exec(e);for(o=null!==w;null!==w;)y=w.index,b[k]=e.substring(x,y),x=y+w[0].length,k=g.indexOf(w[1])+1,w=m.exec(e);b[k]=e.substring(x),s=new Array(v);for(var T=-1;++T<v;){var I=b[T+1];I&&I.length&&(i=h.normalize(I),n=i.substring(0,d),r=c||!l?t.alphabet(n):{},a=t.pack_tokens(t.filterSize(i.split(_),f,p)),s[T]=new u(i,a,n,r,!1,[]))}i=h.normalize(b[0]),a=t.pack_tokens(t.filterSize(i.split(_),f,p))}else i=h.normalize(e),a=l?t.pack_tokens(t.filterSize(i.split(_),f,p)):[],o=!1,s=new Array(v);return n=i.substring(0,d),r=c||!l?t.alphabet(n):{},new u(i,a,n,r,o,s)}}),u.prototype.resetItem=function(){for(var t=this.tokens_groups,e=-1,i=t.length;++e<i;)for(var n=t[e].score_item,r=-1,s=n.length;++r<s;)n[r]=0;if(this.fused_score=0,this.has_children)for(var o=this.children,a=-1,h=o.length;++a<h;){var u=o[a];u&&u.resetItem()}},u.prototype.scoreItem=function(){for(var t=0,e=this.tokens_groups,i=-1,n=e.length;++i<n;)for(var r=e[i].score_item,s=-1,o=r.length;++s<o;)t+=r[s];if(this.fused_score>t&&(t=this.fused_score),this.has_children)for(var a=this.children,h=-1,u=a.length;++h<u;){var l=a[h];l&&(t+=l.scoreItem())}return t},t.alphabet=function(e){var i=e.length;return i>w?t.posVector(e):t.bitVector(e,{},0)},t.mapAlphabet=function(e){for(var i=e.length,n=new Array(i),r=-1;++r<i;){var s=e[r];n[r]=s.length>w?t.posVector(s):t.bitVector(s,{},0)}return n},t.bitVector=function(t,e,i){for(var n,r=t.length,s=-1,o=i;++s<r;)n=t[s],n in e?e[n]|=1<<o++:e[n]=1<<o++;return e},t.posVector=function(t){for(var e,i={},n=t.length,r=-1;++r<n;)e=t[r],e in i?i[e].push(r):i[e]=[r];for(e in i)i.hasOwnProperty(e)&&i[e].push(1/0);return i},t.pack_tokens=function(e){for(var i,n=-1,r=e.length,s=[];r>n;){for(var o=[],a={},h=0,u=0;++n<r;){var c=e[n],d=c.length;if(d>=w){i=new l([c],t.posVector(c),4294967295);break}if(d+h>=w){n--;break}o.push(c),t.bitVector(c,a,h),u|=(1<<c.length-1)-1<<h,h+=d}o.length>0&&s.push(new l(o,a,u)),i&&(s.push(i),i=null)}return s},t.prototype.score=function(e,i){var n=t.alphabet(e);return t.score_map(e,i,n,this.options)},t.score_map=function(e,i,n,r){var s,o,a=e.length,h=i.length,u=r.bonus_match_start,l=h>a?a:h;if(0===l)return 0;var c=(a+h)/(2*a*h),d=0;if(e===i)d=l;else for(;e[d]===i[d]&&++d<l;);if(d===l)return o=d,c*o*o+u*d;if(a>w)return o=t.llcs_large(e,i,n,d),c*o*o+u*d;var f,p,g=(1<<a)-1,m=g;for(s=d-1;++s<h;)p=i[s],p in n&&(f=m&n[p],m=m+f|m-f);return g&=~((1<<d)-1),m=~m&g,m-=m>>1&1431655765,m=(858993459&m)+(m>>2&858993459),o=16843009*(m+(m>>4)&252645135)>>24,o+=d,c*o*o+u*d},t.score_single=function(e,i,n){var r=e.tokens[0],s=r.length,o=i.length;return o<n.token_min_rel_size*s||o>n.token_max_rel_size*s?[0]:[t.score_map(r,i,e.map,n)]},t.score_pack=function(e,i,n){var r=e.tokens,s=r.length;if(1==s)return t.score_single(e,i,n);for(var o,a,h=4294967295,u=0|e.gate,l=e.map,c=-1,d=i.length;++c<d;)a=i[c],a in l&&(o=h&l[a],h=(h&u)+(o&u)|h-o);h=~h;for(var f=n.bonus_match_start,p=n.token_min_rel_size,g=n.token_max_rel_size,m=new Array(s),v=0,_=-1;++_<s;){var y,x,k=r[_],b=k.length;if(p*b>d||d>g*b)m[_]=0,v+=b;else{if(k===i)x=y=b;else{var w=d>b?b:d;for(x=0;k[x]===i[x]&&++x<w;);y=x;for(var T=(h>>>v&(1<<b)-1)>>>x;T;)T&=T-1,y++}v+=b;var I=(b+d)/(2*b*d);m[_]=I*y*y+f*x}}return m},t.llcs_large=function(t,e,i,n){var r,s,o,a,h,u;void 0===n&&(n=0),o=n?[new c(0,n),new c(1/0,1/0)]:[new c(1/0,1/0)];var l,d,f,p,g,m,v=n,_=o.length,y=e.length;for(m=n;y>m;m++){var x=e[m];if(x in i){l=i[x];var k=new Array(Math.min(2*_,v+2));for(a=-1,d=0,s=l[0],u=-1,p=-1;++p<_;){for(h=u,f=o[p],r=f.start,u=f.end,g=u-r;h>s;)s=l[++d];s>=r?k[++a]=f:(s===h?k[a].end++:1===g?(f.start=s,f.end=s+1,k[++a]=f):k[++a]=new c(s,s+1),g>1&&(f.start++,k[++a]=f))}r>s&&(k[++a]=f,v++),o=k,_=++a}}return v},i(t.prototype,{search:function(e){var i=window.performance&&window.performance.now?window.performance:Date,n=i.now();this.start_time=n;var r=this.options;this.dirty&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1);var s=this.query=this._prepQuery(e),o=this.index,a=[];r.filter&&(o=r.filter.call(this,o));var h=this._searchIndex(s,o,a);a=t.filterGTE(a,"score",h),"function"==typeof r.sorter&&(a=a.sort(r.sorter)),(r.output_map||r.output_limit>0)&&(a="function"==typeof r.output_map?t.map(a,r.output_map,this,r.output_limit):t.mapField(a,r.output_map,r.output_limit));var u=i.now();return this.search_time=u-n,this.results=a,a},_searchIndex:function(e,i,n){for(var r=this.options,s=r.bonus_position_decay,o=r.field_good_enough,h=r.thresh_relative_to_best,u=r.score_per_token,l=r.score_round,c=r.thresh_include,d=0,f=e.children,p=-1,g=i.length;++p<g;){var m=i[p],v=m.fields;e.resetItem();for(var _=0,y=-1,x=-1,k=1,b=-1,w=v.length;++b<w;){for(var T=0,I=-1,C=v[b],S=f[b],P=!!S,$=-1,O=C.length;++$<O;){var L,A=C[$];u?(L=this._scoreField(A,e),P&&(L+=this._scoreField(A,S))):L=t.score_map(e.fused_str,A.join(" "),e.fused_map,r),L>T&&(T=L,I=$)}if(T*=1+k,k*=s,T>_&&(_=T,y=b,x=I,T>o))break}if(u){var H=e.scoreItem();_=.5*_+.5*H}if(_>d){d=_;var z=_*h;z>c&&(c=z)}_>c&&(_=Math.round(_/l)*l,n.push(new a(m.item,v,_,y,x,v[0][0].join(" "))))}return c},_scoreField:function(e,i){var n=i.tokens_groups,r=n.length,s=e.length;if(!r||!s)return 0;for(var o,a,h,u,l,c=0,d=-1,f=this.options,p=f.bonus_token_order,g=f.minimum_match,m=-1;++m<r;){var v=n[m],_=v.tokens.length,y=v.score_field;for(l=-1;++l<_;)y[l]=0;var x=v.field_pos;for(l=-1;++l<_;)x[l]=0;for(var k=-1;++k<s;)for(h=e[k],u=t.score_pack(v,h,f),l=-1;++l<_;)o=u[l],a=y[l],(o>a||p>a-o&&l>0&&x[l]<=x[l-1])&&(y[l]=o,x[l]=k);var b=v.score_item;for(l=-1;++l<_;){if(o=y[l],c+=o,o>g){var w=x[l],T=w-d,I=p*(1/(1+Math.abs(T)));T>0&&(I*=2),c+=I,o+=I,d=w}o>b[l]&&(b[l]=o)}}if(f.score_test_fused){for(var C=f.score_acronym?s-1:s,S=e[0],P=0;++P<C;)S+=" "+e[P];var $=t.score_map(i.fused_str,S,i.fused_map,f);$+=p,c=$>c?$:c,$>i.fused_score&&(i.fused_score=$)}return c}}),i(t.prototype,{_prepSource:function(e,i,n){var r,s=e.length;n?(this.index=new Array(s),r=0):r=s;for(var o=this.index,a=this.options,h=a.token_field_min_length,u=a.token_field_max_length,l=a.score_acronym,c=this.acro_re,f=this.token_re,p=-1;++p<s;){for(var g=e[p],m=t.generateFields(g,i),v=m.length,_=-1;++_<v;)for(var y=m[_],x=-1,k=y.length;++x<k;){var b=a.normalize(y[x]),w=b.split(f);b.length>2*h&&(w=t.filterSize(w,h,u)),l&&w.push(b.replace(c,"$1")),y[x]=w}o[r++]=new d(g,m)}}}),t.generateFields=function(t,e){if(!e.length)return[[t.toString()]];for(var i=e.length,n=new Array(i),r=-1;++r<i;)n[r]=f(t,e[r].split("."),[],0);return n};var T=g();return t.filterSize=function(t,e,i){for(var n,r,s=-1,o=-1,a=t.length,h=[];++s<a;)n=t[s],r=n.length,r>=e&&(h[++o]=i>r?n:n.substr(0,i));return h},i(t.defaultOptions,{highlight_prefix:!1,highlight_bridge_gap:2,highlight_before:'<strong class="highlight">',highlight_after:"</strong>"}),t.prototype.highlight=function(e,i){var n,r,s=this.query.normalized;return i&&i.length&&(n=this.tags.indexOf(i))>-1&&(r=this.query.children[n])&&(s+=(s.length?" ":"")+r.normalized),t.highlight(s,e,this.options)},t.highlight=function(e,i,n){if(void 0===n&&(n=t.defaultOptions),!i)return"";var r=n.highlight_before,s=n.highlight_after,o=n.score_per_token,a=n.score_test_fused,h=n.score_acronym,u=n.token_re,l=n.normalize(e),c=n.normalize(i),d=l.split(u),f=c.split(u),p=[],g=[];
m(i,u,p,g);var v=[],_=[],y=0,x=0;if(o&&(x=t.matchTokens(f,d,_,n,!1)),(a||!o||h)&&(y=t.score_map(l,c,t.alphabet(l),n)+n.bonus_token_order),0===x&&0===y)return i;(!o||y>x)&&(d=[l],f=[c],p=[i],_=[0]);for(var k=p.length,b=-1;++b<k;){var w=_[b];if(-1!==w){var T=d[w],I=f[b],C=p[b],S=0,P=[],$=[];t.align(T,I,P,$);for(var O=P.length,L=-1;++L<O;){var A=P[L],H=$[L];A>S&&v.push(C.substring(S,A)),v.push(r+C.substring(A,H)+s),S=H}v.push(C.substring(S)+g[b])}else v.push(p[b]+g[b])}return v.join("")},t.align=function(e,i,n,r,s){void 0===s&&(s=t.defaultOptions);var o,a,h=100,u=-10,l=-1,c=0,d=1,f=2,p=3,g=s.score_acronym,m=s.token_sep,v=Math.min(e.length+1,s.token_query_max_length),_=Math.min(i.length+1,s.token_field_max_length),y=_>v?v:_,x=0;if(e===i)x=v,v=0;else if(s.highlight_prefix){for(o=0;y>o&&e[o]===i[o];o++)x++;x&&(e=e.substring(x),i=i.substring(x),v-=x,_-=x)}var k=0,b=0,w=0,T=new Array(v*_),I=_-1;if(v>1&&_>1){var C,S,P,$,O=new Array(_),L=new Array(_),A=0;for(a=0;_>a;a++)L[a]=0,O[a]=0,T[a]=c;for(o=1;v>o;o++)for(A=0,C=O[0],I++,T[I]=c,a=1;_>a;a++)switch($=L[a]=Math.max(L[a]+l,O[a]+u),A=Math.max(A+l,O[a-1]+u),P=g?e[o-1]!==i[a-1]?-1/0:C+h+(2>o||m.indexOf(e[o-2])>-1?h:0)+(2>a||m.indexOf(i[a-2])>-1?h:0):e[o-1]===i[a-1]?C+h:-1/0,C=O[a],S=O[a]=Math.max(P,$,A,0),I++,S){case A:T[I]=f;break;case P:T[I]=p,S>k&&(k=S,b=o,w=a);break;case $:T[I]=d;break;default:T[I]=c}}var H=s.highlight_bridge_gap,z=0;if(k>0){o=b,a=w,I=o*_+a,z=w,r.push(w+x);for(var D=!0;D;)switch(T[I]){case d:o--,I-=_;break;case f:a--,I--;break;case p:z-a>H&&(n.push(z+x),r.push(a+x)),a--,o--,z=a,I-=_+1;break;case c:default:D=!1}n.push(z+x)}return x&&(z>0&&H>=z?n[n.length-1]=0:(n.push(0),r.push(x))),n.reverse(),r.reverse(),k+x},t.matchTokens=function(e,i,n,r,s){void 0===r&&(r=t.defaultOptions),void 0===s&&(s=!1);var o,a,h,u,l,c,d,f=r.minimum_match,p=r.thresh_relative_to_best,g=[],m=e.length,_=i.length,y=t.mapAlphabet(e),x=f,b=-1,w=-1,T=0,I=[];for(o=0;m>o;o++)if(h=[],n[o]=-1,x=f,u=e[o],u.length){for(c=y[o],a=0;_>a;a++)l=i[a],l.length?(d=t.score_map(u,l,c,r),h[a]=d,d>f&&T++,d>x&&(x=d,b=o,w=a)):h[a]=0;I[o]=x,g[o]=h}else{for(a=0;_>a;a++)h[a]=0;g[o]=h}if(0===T)return 0;if(1===T)return n[b]=w,s&&k(n,_),x;for(o=0;o<e.length;o++)I[o]=Math.max(p*I[o],f);var C=v(g,n,I,r.bonus_token_order);return s&&k(n,_),C},i(t.prototype,{getInteractive:function(){var t=this,e=this.options,i=e.interactive_debounce,n=e.interactive_mult,r=e.interactive_burst;if(0===i)return function(e,i){return i(t.search(e))};var s,o,a=window.performance&&window.performance.now?window.performance:Date,h=0,u=!1;return function(e,l,c,d){var f=function(){s=null,u&&(o=t.search(e),d(o)),h=0,u=!1};if(clearTimeout(s),s=setTimeout(f,i),++h<r){u=!1;var p=a.now();o=t.search(e);var g=l(o),m=a.now();return i=.5*i+.5*n*(m-p),g}return u=!0,c(o)}},__ttAdapter:function(){var t=this.getInteractive(),e=function(){};return function(i,n,r){t(i,n,e,r)}},$uiSource:function(){var t=this.getInteractive(),e=function(){};return function(i,n){t(i.term,n,e,n)}}}),"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.FuzzySearch=t,t}(),function(){}.call(this);